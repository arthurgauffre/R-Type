<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R-Type: R-Type Game Network Protocol</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R-Type
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">R-Type <a class="el" href="classGame.html">Game</a> Network Protocol </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document outlines the design and implementation of a custom UDP-based protocol for the R-Type game. The protocol ensures low-latency transmission of game data while providing reliability for critical events. The protocol begins with a connection phase that mimics TCP over UDP, followed by efficient handling of game state data and guaranteed delivery for essential information. The implementation utilizes the <b>ASIO</b> C++ library for asynchronous I/O operations.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md1882"></a>
Table of Contents</h1>
<ol type="1">
<li><a href="#1-connection-establishment">Connection Establishement</a><ul>
<li><a href="#encrypted-handshake">Encrypted Handshake</a></li>
<li><a href="#connection-handshake-example">Connection Handshake Example</a></li>
</ul>
</li>
<li><a href="#2-data-transmission">Data Transmission</a><ul>
<li><a href="#game-data-packet-structure">Game Data Packet Structure</a></li>
<li><a href="#12-critical-event-transmission">Critical Event Transmission</a></li>
<li><a href="#critical-event-packet-structure">Critical Event Packet Structure</a></li>
</ul>
</li>
<li><a href="#2-reliability-mechanisms">Reliability Mechanisms</a><ul>
<li><a href="#21-packet-acknowledgment">Packet Acknowledgment</a></li>
<li><a href="#22-retransmission-strategy">Retransmission Strategy</a></li>
<li><a href="#23-events-answers">Events Answers</a><ul>
<li><a href="#movements">Movements</a></li>
<li><a href="#entity-movement">Entity Movement</a></li>
<li><a href="#creation-of-an-entity--component">Creation of an Entity / Component</a></li>
<li><a href="#deletion-of-an-entity--component">Deletion of an Entity / Component</a></li>
<li><a href="#update-entity--component">Update Entity / Component</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3-conclusion">Conclusion</a></li>
<li><a class="el" href="md_Readme.html">Main documentation</a></li>
</ol>
<h1><a class="anchor" id="autotoc_md1883"></a>
1. Connection Establishment</h1>
<p>Although the game operates over UDP, the connection phase is designed to resemble TCP's 3-way handshake to ensure that both the client and server acknowledge each other before proceeding with game data transmission. <b>ASIO</b> is used to manage asynchronous sending and receiving of these messages.</p>
<h3><a class="anchor" id="autotoc_md1884"></a>
Encrypted Handshake</h3>
<p>To ensure the connection is secure from unauthorized access, the handshake process is encrypted using <b>bcrypt</b>. This ensures that the client and server exchange data securely and that only authorized clients can establish a connection.</p>
<p>The encrypted handshake process is as follows:</p>
<ol type="1">
<li><b>Client sends SYN</b>: The client initiates a connection request by sending a SYN message to the server.</li>
<li><b>Server responds with SYN-ACK</b>: The server generates a challenge (a cryptographic nonce or hash) and responds with a SYN-ACK.</li>
<li><b>Client sends encrypted ACK</b>: The client hashes the challenge using bcrypt (or equivalent) and sends the encrypted ACK message to the server.</li>
<li><b>Server validates ACK</b>: The server verifies the hash to ensure the client has the correct credentials, completing the handshake securely.</li>
</ol>
<p>This encryption ensures that the connection setup is secure from the beginning, protecting the game from potential security risks, such as unauthorized access or man-in-the-middle attacks.</p>
<h3><a class="anchor" id="autotoc_md1885"></a>
Connection Handshake Example</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Step   </th><th class="markdownTableHeadNone">Message   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">SYN   </td><td class="markdownTableBodyNone">Client initiates connection    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">SYN-ACK   </td><td class="markdownTableBodyNone">Server acknowledges connection and sends cryptographic challenge    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Encrypted ACK   </td><td class="markdownTableBodyNone">Client responds with an encrypted hash using bcrypt    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Validate ACK   </td><td class="markdownTableBodyNone">Server validates the encrypted response, completing the handshake   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md1886"></a>
1.1 Data Transmission</h2>
<p>After the connection is established, the game data is transmitted over UDP using <b>ASIO</b> to handle asynchronous communication. <a class="el" href="classGame.html">Game</a> data includes player positions, actions, enemy spawns, and environment updates. These packets are sent frequently and are designed to tolerate packet loss, as minor data loss does not significantly impact the game's experience.</p>
<p>The message structure is composed of two parts: the <b>header</b> and the <b>body</b>. The header contains important metadata such as:</p>
<ul>
<li><b>Transaction ID (TID)</b>: A unique identifier for the message.</li>
<li><b>Size</b>: The size of the message in bytes.</li>
</ul>
<p>The body contains the actual game data, and its size can vary depending on the message being transmitted.</p>
<h3><a class="anchor" id="autotoc_md1887"></a>
Game Data Packet Structure</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Size   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TID   </td><td class="markdownTableBodyNone">4 bytes   </td><td class="markdownTableBodyNone">Unique identifier for the packet    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Size   </td><td class="markdownTableBodyNone">4 bytes   </td><td class="markdownTableBodyNone">Size of the packet in bytes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Body   </td><td class="markdownTableBodyNone">Variable   </td><td class="markdownTableBodyNone"><a class="el" href="classGame.html">Game</a> state data   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md1888"></a>
1.2 Critical Event Transmission</h2>
<p>Certain game events are too important to risk losing due to packet loss. These include events like:</p>
<ul>
<li>An entity has been created</li>
<li>An entity has been destroyed</li>
<li>A player dying</li>
<li>Boss spawning</li>
<li><a class="el" href="classGame.html">Game</a> ending</li>
</ul>
<p>For these critical events, we employ a retransmission mechanism until the server confirms that all clients have successfully received the message.</p>
<h3><a class="anchor" id="autotoc_md1889"></a>
Critical Event Packet Structure</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Size   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Header-&gt;TID   </td><td class="markdownTableBodyNone">4 bytes   </td><td class="markdownTableBodyNone">Type of event (e.g., player death)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Body   </td><td class="markdownTableBodyNone">Variable   </td><td class="markdownTableBodyNone">Struct that contains the entityId and data specific to the event   </td></tr>
</table>
<ol type="1">
<li><b>Event Sent</b>: The server sends the event packet to all clients.</li>
<li><b>Client ACK</b>: Each client sends an acknowledgment (ACK) back to the server.</li>
<li><b>Retransmit if necessary</b>: If the server does not receive an ACK from a client, it will retransmit the event until the ACK is received.</li>
</ol>
<h3><a class="anchor" id="autotoc_md1890"></a>
Critical Event Example</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Step   </th><th class="markdownTableHeadNone">Message   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Event (Death)   </td><td class="markdownTableBodyNone">Server sends player death event    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">ACK   </td><td class="markdownTableBodyNone">Client acknowledges the event    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Retransmit   </td><td class="markdownTableBodyNone">If ACK not received, server retransmits the event   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1891"></a>
2. Reliability Mechanisms</h1>
<h2><a class="anchor" id="autotoc_md1892"></a>
2.1 Packet Acknowledgment</h2>
<p>For critical game events, the protocol requires clients to acknowledge receipt of important packets. The server keeps track of these acknowledgments and retransmits if necessary.</p>
<h2><a class="anchor" id="autotoc_md1893"></a>
2.2 Retransmission Strategy</h2>
<ul>
<li><b>Timeout-Based Retransmission</b>: The server uses a timeout mechanism to determine if a packet needs to be retransmitted. If no acknowledgment is received within the timeout window, the packet is retransmitted.</li>
<li><b>Max Retransmissions</b>: To avoid excessive retransmissions, a maximum number of attempts is set. After this, the server logs an error and may take corrective actions, such as notifying the client of a disconnection.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1894"></a>
2.3 Events Answers</h2>
<p>Here is the struct of the Message that the server and the client will exchange, and the T (template) id in the MessageHeader will be one of the enum value given below.</p>
<div class="fragment"><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">struct </span>MessageHeader {</div>
<div class="line">  T <span class="keywordtype">id</span>{};</div>
<div class="line">  uint32_t size = 0;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">struct </span>Message {</div>
<div class="line">  MessageHeader&lt;T&gt; header{};</div>
<div class="line">  std::vector&lt;uint8_t&gt; body;</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1895"></a>
Movements</h1>
<div class="fragment"><div class="line"><span class="keyword">enum class</span> NetworkMessages : uint32_t {</div>
<div class="line">  MoveUp,</div>
<div class="line">  MoveDown,</div>
<div class="line">  MoveLeft,</div>
<div class="line">  MoveRight</div>
<div class="line">};</div>
</div><!-- fragment --><div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    Client-&gt;&gt;Server: Entity Movement</div>
</div><!-- fragment --><p>In this case the server Does not respond (because we can have the information in the next update if the packet has been lost in a transaction)</p>
<h2><a class="anchor" id="autotoc_md1896"></a>
Entity Movement</h2>
<div class="fragment"><div class="line">message.header.id = NetworkMessages::MoveUp</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::MoveDown</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::MoveRight</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::MoveLeft</div>
<div class="line"> </div>
<div class="line"><span class="comment">// I know that is not the way it works to put data into the body but it&#39;s just to simplify things</span></div>
<div class="line"> </div>
<div class="line">body = entityId <span class="comment">// cast into uint8_t</span></div>
</div><!-- fragment --><p>#</p>
<h1><a class="anchor" id="autotoc_md1897"></a>
Creation of an Entity / Component</h1>
<div class="fragment"><div class="line"><span class="keyword">enum class</span> NetworkMessages : uint32_t {</div>
<div class="line">  createEntity,</div>
<div class="line">  createTexture,</div>
<div class="line">  createPosition,</div>
<div class="line">  createVelocity,</div>
<div class="line">  createHealth,</div>
<div class="line">  createDamage,</div>
<div class="line">  createHitbox,</div>
<div class="line">  createMusic,</div>
<div class="line">  createSound,</div>
<div class="line">  createSprite,</div>
<div class="line">  createTransform,</div>
<div class="line">  createBackground,</div>
<div class="line">  createScroll,</div>
<div class="line">  createParent</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1898"></a>
FIRST CASE (No packet loss):</h2>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    Server-&gt;&gt;Client: Create Entity / Component</div>
<div class="line">    Client-&gt;&gt;Server: I Received the message (ACK)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1899"></a>
SECOND CASE (Packet loss):</h2>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    Server-&gt;&gt;Client: Create Entity / Component</div>
<div class="line">    Client-&gt;&gt;Server: I did not Received the message</div>
<div class="line">    Server-&gt;&gt;Client: Create Entity / Component</div>
<div class="line">    Client-&gt;&gt;Server: ...</div>
</div><!-- fragment --><div class="fragment"><div class="line">message.header.id = NetworkMessages::createEntity</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createTexture</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createPosition</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createVelocity</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createHealth</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createDamage</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createHitbox</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createMusic</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createSound</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createSprite</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createTransform</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createBackground</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createScroll</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::createParent</div>
<div class="line"> </div>
<div class="line"><span class="comment">// I know that is not the way it works to put data into the body but it&#39;s just to simplify things</span></div>
<div class="line"> </div>
<div class="line">body = entityId, {<span class="keyword">struct </span>message.header.id} <span class="comment">// cast into uint8_t</span></div>
</div><!-- fragment --><p>#</p>
<h1><a class="anchor" id="autotoc_md1900"></a>
Deletion of an Entity / Component</h1>
<div class="fragment"><div class="line"><span class="keyword">enum class</span> NetworkMessages : uint32_t {</div>
<div class="line">  destroyEntity,</div>
<div class="line">  deleteTexture,</div>
<div class="line">  deletePosition,</div>
<div class="line">  deleteVelocity,</div>
<div class="line">  deleteHealth,</div>
<div class="line">  deleteDamage,</div>
<div class="line">  deleteHitbox,</div>
<div class="line">  deleteMusic,</div>
<div class="line">  deleteSound,</div>
<div class="line">  deleteSprite,</div>
<div class="line">  deleteTransform,</div>
<div class="line">  deleteBackground,</div>
<div class="line">  deleteScroll,</div>
<div class="line">  deleteParent</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1901"></a>
FIRST CASE (No packet loss):</h2>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    Server-&gt;&gt;Client: Delete Entity / Component</div>
<div class="line">    Client-&gt;&gt;Server: I Received the message (ACK)</div>
</div><!-- fragment --><div class="fragment"><div class="line">message.header.id = NetworkMessages::destroyEntity</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteTexture</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deletePosition</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteVelocity</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteHealth</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteDamage</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteHitbox</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteMusic</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteSound</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteSprite</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteTransform</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteBackground</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteScroll</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::deleteParent</div>
<div class="line"> </div>
<div class="line"><span class="comment">// I know that is not the way it works to put data into the body but it&#39;s just to simplify things</span></div>
<div class="line"> </div>
<div class="line">body = entityId, {<span class="keyword">struct </span>message.header.id} <span class="comment">// cast into uint8_t</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1902"></a>
SECOND CASE (Packet loss):</h2>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    Server-&gt;&gt;Client: Delete Entity / Component</div>
<div class="line">    Client-&gt;&gt;Server: I did not Received the message</div>
<div class="line">    Server-&gt;&gt;Client: Delete Entity / Component</div>
<div class="line">    Client-&gt;&gt;Server: ...</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1903"></a>
&lt;a href="#first-case-no-packet-loss-1"&gt;Reference case&lt;/a&gt;</h2>
<p>#</p>
<h1><a class="anchor" id="autotoc_md1904"></a>
Update Entity / Component</h1>
<div class="fragment"><div class="line"><span class="keyword">enum class</span> NetworkMessages : uint32_t {</div>
<div class="line">  updateEntity,</div>
<div class="line">  updateTexture,</div>
<div class="line">  updatePosition,</div>
<div class="line">  updateVelocity,</div>
<div class="line">  updateHealth,</div>
<div class="line">  updateDamage,</div>
<div class="line">  updateHitbox,</div>
<div class="line">  updateMusic,</div>
<div class="line">  updateSound,</div>
<div class="line">  updateSprite,</div>
<div class="line">  updateTransform,</div>
<div class="line">  updateBackground,</div>
<div class="line">  updateScroll,</div>
<div class="line">  updateParent</div>
<div class="line">};</div>
</div><!-- fragment --><div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    Server-&gt;&gt;Client: Update Entity / Component</div>
</div><!-- fragment --><p>In this case the server Does not respond (because we can have the information in the next update if the packet has been lost in a transaction)</p>
<div class="fragment"><div class="line">message.header.id = NetworkMessages::updateEntity</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateTexture</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updatePosition</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateVelocity</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateHealth</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateDamage</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateHitbox</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateMusic</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateSound</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateSprite</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateTransform</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateBackground</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateScroll</div>
<div class="line"><span class="comment">// OR</span></div>
<div class="line">message.header.id = NetworkMessages::updateParent</div>
<div class="line"> </div>
<div class="line"><span class="comment">// I know that is not the way it works to put data into the body but it&#39;s just to simplify things</span></div>
<div class="line"> </div>
<div class="line">body = entityId, {<span class="keyword">struct </span>message.header.id} <span class="comment">// cast into uint8_t</span></div>
</div><!-- fragment --><p>#</p>
<h1><a class="anchor" id="autotoc_md1905"></a>
3. Conclusion</h1>
<p>This UDP-based protocol, implemented with the <b>ASIO</b> C++ library, balances the need for speed with the requirement for reliability in critical moments. While game state updates are transmitted without guarantees, important events are handled with care to ensure consistency across all clients. The use of a priority field in the message header ensures that critical information is delivered with precedence. This design allows for a fluid and responsive multiplayer experience while maintaining the integrity of essential game events.</p>
<p>#</p>
<p>Go to the main documentation : <a class="el" href="md_Readme.html">Main documentation</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
